# GFS: Google File System  

## Consistency  
#### Why is distributed storage hard?  
* high performance -> shard data over many servers.  
* many servers -> constant faults.  
* fault tolerance -> replication.  
* replication -> potential inconsistencies.  
* better consistency -> low performance.  

### Consistency Concept 
* Same behavior as a single server, server executes client operations one at a time (even if concurrent).  
* Reads reflect previous writes even if server crashes and restarts.  

#### Example of Strong Consistency Model  
* suppose C1 and C2 write concurrently, and after the writes have completed, C3 and C4 read. what can they see?  
```go
    C1: Wx1
    C2: Wx2
    C3:     Rx?
    C4:         Rx?
```
* Answer: either 1 or 2, but both have to see the same value. This is consistency.  
* Disadvantage: single server has poor fault-tolerance.  

#### Example of Fault-Tolerance  
```go
  two replica servers, S1 and S2
    clients send writes to both, in parallel
    clients send reads to either
``` 
* C1's and C2's write messages could arrive in different orders at the two replicas.  
  * If C3 reads S1, it might see x=1.  
  * If C4 reads S2, it might see x=2.  


  

